<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button text="" defaultHref="/tabs"></ion-back-button>
        </ion-buttons>
        <ion-title>Change Password</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-grid class="ion-no-padding">
        <ion-row class="logo-section">
            <ion-col class="ion-no-padding ion-text-center">
                <img src="assets/imgs/forgot.png" />
            </ion-col>
        </ion-row>
        <ion-row class="upper-section">
            <ion-col size="12">
                <h4>Change Your Password</h4>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore asperiores facere quas</p>
            </ion-col>
            <ion-col size="12">  
                <form class="signup-form auth-form" [formGroup]="changePassForm" (ngSubmit)="changePassword(changePassForm.value)">
                    <ion-input type="password" formControlName="oldPassword" placeholder="Current Password"></ion-input>
                    <ng-container *ngFor="let validation of validation_messages.oldPassword">
                        <p class="errp" *ngIf="changePassForm.get('oldPassword').hasError(validation.type) && (changePassForm.get('oldPassword').dirty || changePassForm.get('oldPassword').touched)">
                          <ion-icon class="erricon" name="information-circle-outline"></ion-icon>
                          <span>{{ validation.message }}</span>
                        </p>
                      </ng-container>

                      <div class="b_bottom" formGroupName="matching_passwords" class="matching_passwords">

                    <ion-input type="password" formControlName="password" placeholder="New Password"></ion-input>
                    <ng-container *ngFor="let validation of validation_messages.password">
                        <p class="errp"
                          *ngIf="changePassForm.get('matching_passwords').get('password').hasError(validation.type) && (changePassForm.get('matching_passwords').get('password').dirty || changePassForm.get('matching_passwords').get('password').touched)">
                          <ion-icon class="erricon" name="information-circle-outline"></ion-icon>
                          <span>{{ validation.message }}</span>
                        </p>
                      </ng-container>

                    <ion-input type="password" formControlName="confirmPassword" placeholder="New Password"></ion-input>
                    <ng-container *ngFor="let validation of validation_messages.confirmPassword">
                        <p class="errp"
                          *ngIf="changePassForm.get('matching_passwords').get('confirmPassword').hasError(validation.type) && (changePassForm.get('matching_passwords').get('confirmPassword').dirty || changePassForm.get('matching_passwords').get('confirmPassword').touched)">
                          <ion-icon class="erricon" name="information-circle-outline"></ion-icon>
                          <span>{{ validation.message }}</span>
                        </p>
                      </ng-container>
              
                      <ng-container *ngFor="let validation of validation_messages.matching_passwords">
                        <p class="errp"
                          *ngIf="changePassForm.get('matching_passwords').hasError(validation.type) && (changePassForm.get('matching_passwords').get('confirmPassword').dirty || changePassForm.get('matching_passwords').get('confirmPassword').touched)">
                          <ion-icon class="erricon" name="information-circle-outline"></ion-icon>
                          <span>{{ validation.message }}</span>
                        </p>
                      </ng-container>
                    </div>

                    <p class="errp" *ngIf="errorMsg">
                      <ion-icon class="erricon" name="information-circle-outline"></ion-icon>
                      <span>{{errorMsg}}</span>
                    </p>

                    <ion-button expand="block" type="submit" class="continue" [disabled]="!changePassForm.valid">Update</ion-button>

                </form>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>

<!-- <ion-footer>
    <ion-toolbar>
        <ion-button expand="block" class="continue" type="submit">Update<img src="assets/imgs/button-img.png" /> </ion-button>
    </ion-toolbar>
</ion-footer> -->